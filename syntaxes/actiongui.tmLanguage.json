{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "ActionGUI",
  "patterns": [
    {
      "include": "#comment"
    },
    {
      "include": "#dataModelDef"
    },
    {
      "include": "#roleDef"
    }
  ],
  "repository": {
    "comment": {
      "patterns": [
        {
          "name": "comment.line.double-slash.actiongui",
          "match": "//.*"
        },
        {
          "name": "comment.block.actiongui",
          "begin": "/\\*",
          "end": "\\*/"
        }
      ]
    },
    "dataModelDef": {
      "name": "meta.datamodel.actiongui",
      "patterns": [
        {
          "include": "#entityDef"
        },
        {
          "include": "#enumDef"
        }
      ]
    },
    "entityDef": {
      "name": "meta.entity.actiongui",
      "begin": "(entity)\\s+(\\w+)\\s+(\\{)",
      "end": "(\\})",
      "beginCaptures": {
        "1": {
          "name": "storage.type.actiongui"
        },
        "2": {
          "name": "entity.name.type.entity.actiongui"
        },
        "3": {
          "name": "punctuation.definition.block.actiongui"
        }
      },
      "endCaptures": {
        "1": {
          "name": "punctuation.definition.block.actiongui"
        }
      },
      "patterns": [
        {
          "include": "#fieldDef"
        },
        {
          "include": "#comment"
        }
      ]
    },
    "fieldDef": {
      "patterns": [
        {
          "include": "#primitiveType"
        },
        {
          "include": "#collectionType"
        },
        {
          "match": "\\b(oppositeTo)\\s+(\\w+)\\b",
          "captures": {
            "1": {
              "name": "keyword.other.association.actiongui"
            },
            "2": {
              "name": "variable.other.property.actiongui"
            }
          }
        },
        {
          "include": "#customType"
        },
        {
          "name": "variable.other.property.actiongui",
          "match": "\\b[a-z]\\w+\\b"
        }
      ]
    },
    "primitiveType": {
      "name": "support.type.primitive.actiongui",
      "match": "\\b(Boolean|Integer|Real|String|LocalDate)\\b"
    },
    "customType": {
      "name": "entity.name.type.actiongui",
      "match": "\\b[A-Z]\\w*\\b"
    },
    "collectionType": {
      "name": "support.type.collection.actiongui",
      "begin": "\\b(Set|Bag|OrderedSet|Sequence)(\\()",
      "end": "(\\))",
      "beginCaptures": {
        "1": {
          "name": "support.type.collection.base.actiongui"
        },
        "2": {
          "name": "punctuation.definition.generic.actiongui"
        }
      },
      "endCaptures": {
        "1": {
          "name": "punctuation.definition.generic.actiongui"
        }
      },
      "patterns": [
        {
          "include": "#primitiveType"
        },
        {
          "include": "#customType"
        }
      ]
    },
    "enumDef": {
      "name": "meta.enum.actiongui",
      "begin": "(enum)\\s+(\\w+)\\s+(\\{)",
      "end": "(\\})",
      "beginCaptures": {
        "1": {
          "name": "storage.type.actiongui"
        },
        "2": {
          "name": "entity.name.type.enum.actiongui"
        },
        "3": {
          "name": "punctuation.definition.block.actiongui"
        }
      },
      "endCaptures": {
        "1": {
          "name": "punctuation.definition.block.actiongui"
        }
      },
      "patterns": [
        {
          "name": "constant.other.enum.actiongui",
          "match": "\\w+"
        },
        {
          "include": "#comment"
        }
      ]
    },
    "roleDef": {
      "name": "meta.role.actiongui",
      "begin": "(role)\\s+(\\w+)\\s+(\\{)",
      "end": "(\\})",
      "beginCaptures": {
        "1": {
          "name": "storage.type.actiongui"
        },
        "2": {
          "name": "entity.name.type.role.actiongui"
        },
        "3": {
          "name": "punctuation.definition.block.actiongui"
        }
      },
      "endCaptures": {
        "1": {
          "name": "punctuation.definition.block.actiongui"
        }
      },
      "patterns": [
        {
          "include": "#roleEntity"
        },
        {
          "include": "#comment"
        }
      ]
    },
    "roleEntity": {
      "name": "meta.role.entity.actiongui",
      "begin": "\\b(\\w+)\\s+(\\{)",
      "end": "(\\})",
      "beginCaptures": {
        "1": {
          "name": "entity.name.type.entity.actiongui"
        },
        "2": {
          "name": "punctuation.definition.block.actiongui"
        }
      },
      "endCaptures": {
        "1": {
          "name": "punctuation.definition.block.actiongui"
        }
      },
      "patterns": [
        {
          "name": "variable.other.permission.overall.actiongui",
          "match": "\\b(create|delete|fullAccess)\\b",
          "captures": {
            "1": {
              "name": "keyword.other.permission.overall.actiongui"
            }
          }
        },
        {
          "name": "variable.other.permission.attribute.actiongui",
          "match": "\\b(read|update|add)\\s*\\((\\w+)\\)",
          "captures": {
            "1": {
              "name": "keyword.other.permission.attribute.actiongui"
            },
            "2": {
              "name": "variable.other.property.actiongui"
            }
          }
        },
        {
          "name": "punctuation.separator.permission.actiongui",
          "match": "\\,"
        },
        {
          "begin": "\\b(constrainedBy)\\s*",
          "end": "(?<=\\])",
          "beginCaptures": {
            "1": {
              "name": "keyword.other.permission.constraint.actiongui"
            }
          },
          "patterns": [
            {
              "include": "#ocl"
            }
          ]
        }
      ]
    },
    "ocl": {
      "begin": "(\\[)",
      "end": "(\\])",
      "beginCaptures": {
        "1": {
          "name": "punctuation.block.ocl.actiongui"
        }
      },
      "endCaptures": {
        "1": {
          "name": "punctuation.block.ocl.actiongui"
        }
      },
      "patterns": [
        {
          "name": "support.constant.actiongui.ocl",
          "match": "\\b(caller|value|target)\\b"
        },
        {
          "include": "source.ocl"
        }
      ]
    },
    "strings": {
      "name": "string.quoted.single.actiongui",
      "begin": "\\'",
      "end": "\\'",
      "patterns": [
        {
          "name": "constant.character.escape.actiongui",
          "match": "\\\\."
        }
      ]
    }
  },
  "scopeName": "source.actiongui"
}
